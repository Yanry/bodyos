# Problem Description Generation Rules

**类型**: Tone  
**版本**: v1.0  
**状态**: 🟡 进行中  
**最后更新**: 2026-02-05

---

## Changelog

### v1.0 - 2026-02-05
- ✅ 接收完整文案生成规格文档
- 定义 4 段式问题卡片结构（标题、理解、原因、影响）
- 定义严重程度修饰词映射表
- 定义 5 类核心动作问题的具象描述映射表
- 定义 JSON 格式的文案输出示例

---

## Implementation Log

### 理解要点

1. **结构化文案**: 
   - 摆脱枯燥的学术描述，采用「具身认知」和「生活类比」。
   - 4 段式结构确保了从「发现问题」到「理解问题」再到「感知风险」的完整认知链条。

2. **动态渲染逻辑**:
   - `Title` = `displayName` + `modifier(severity)`.
   - `Description`, `Reason`, `Impact` 通过映射表查询。

3. **情感化修饰**:
   - 根据严重程度（红色/黄色/绿色）分配不同的语气修辞。

### 实现计划

1. **文案库构建**:
   - 在 `src/constants/copy-library.ts` 中实现 `PROBLEM_MAPPING` 对象。
2. **文本处理器**:
   - `CopyGeneratorService`: 接收算法 JSON 输出，输出 4 段式的卡片文案 JSON。
3. **UI 适配**:
   - 确保分数页的问题卡片组件能正确处理这 4 个字段。

### 待澄清问题

- 映射表中提到的 `forward_head`（颈部前伸）在现有的两个算法（深蹲/弓步）中并非核心监测项，是预留给未来的模块吗？（暂按规格完整收录映射关系）。

---

## 规格内容

# 文案生成规则

## 输入

算法输出：问题类型 + 严重程度 + 数值

## 输出

分数页问题卡片文案（4段式）

## 规则模板

### 1. 问题标题

**规则**：{问题中文名} {严重程度修饰}

**示例**：

- knee_valgus + severe → 「膝盖明显内扣」
- lumbar_compensation + mild → 「腰部轻微代偿」

### 2. 用户理解（具象描述）

**规则**：日常动作类比 + 视觉描述

**示例**：

- 膝盖内扣 → 「你的膝盖往里靠，像X型腿」
- 腰部拱起 → 「腰往前拱，像要撅屁股」

### 3. 原因解释（因果链）

**规则**：{主要肌肉无力} → {代偿模式}

**示例**：

- 膝盖内扣 → 「臀外侧不够强 → 膝盖往里塌」
- 腰部代偿 → 「臀部没发上力 → 腰来帮忙」

### 4. 日常影响（具身认知）

**规则**：常见场景 + 身体感受

**示例**：

- 膝盖内扣 → 「爬楼梯膝盖疼，跑步后膝盖不舒服」
- 腰部代偿 → 「运动后腰累，但臀部没感觉」

---

## 完整示例

**算法输入**：

```json
{"name": "knee_valgus", "severity": "severe", "value": 18}
```

**文案输出**：

```json
{
  "title": "膝盖明显内扣",
  "description": "你的膝盖往里靠，像X型腿",
  "reason": "臀外侧（臀中肌）不够强，膝盖往里塌",
  "impact": "爬楼梯膝盖疼，跑步后膝盖不舒服 —— 可能就是这个原因"
}
```

---

## 严重程度修饰词

- 严重（红色）：「明显」「显著」「清楚」
- 轻度（黄色）：「轻微」「有点」「稍微」
- 正常（绿色）：「很好」「稳定」「正确」

---

## 问题映射表

| 算法名称 | 中文名称 | 意象描述 |
| --- | --- | --- |
| knee_valgus | 膝盖内扣 | 膝盖往里靠，像X型腿 |
| lumbar_compensation | 腰部代偿 | 腰往前拱，像要撅屁股 |
| pelvic_instability | 骨盆不稳 | 骨盆晃，像桌子没放平 |
| forward_head | 颈部前伸 | 脖子往前探，像乌龟 |
| trunk_lean | 躯干前倾 | 身子往前倒，不挺直 |

---

[返回主文档](../../README.md) | [查看实现跟踪](../../implementation-tracking.md)
